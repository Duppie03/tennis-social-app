<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eldoraigne Tennis Club - Social Day</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <svg style="position:absolute; height:0; width:0;">
      <defs>
        <filter id="recolor-to-primary-blue">
            <feFlood flood-color="#0A0A57" result="flood" />
            <feComposite in="flood" in2="SourceAlpha" operator="in" />
        </filter>
      </defs>
    </svg>

    <header>
        <img src="source/eldorainge-tennis-logo.png" alt="Club Logo" id="header-logo">
        <div class="header-buttons">
            <div id="weather-display"></div>
        </div>
    </header>

    <div id="time-overlay">
        <div id="left-spacer"></div>
        <h1 id="header-clock" class="header-title">Social Day Manager</h1>
        <div id="right-spacer"></div>
    </div>

    <main class="container">
        <div id="info-bar" class="info-bar hidden">
            <p id="info-bar-text">Dynamic message goes here.</p>
        </div>
        
        <div class="content-columns">
            <section class="player-column">
                <div id="availablePlayersSection">
                    <div class="card-header">
                        <h3>Available Players</h3>
                        <div class="header-controls">
                            <button id="junior-club-btn" class="settings-btn" title="Junior Club">
                                ðŸ‘ª
                            </button>
                            <button id="historyBtn" class="settings-btn" title="Game History">
                                ðŸ“œ
                            </button>
                            <button id="players-toggle-btn" class="settings-btn summary-toggle-btn" data-card-type="players" title="Toggle Details">
                                <i class="mdi mdi-chevron-up"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="player-list-controls">
                            <button id="checkInBtn" class="action-btn">Check In</button>
                            <button id="checkOutBtn" class="action-btn">Check Out</button>
                        </div>
                        <div id="game-mode-container">
                            <h4>Mode</h4>
                            <div class="mode-selector">
                                <button id="mode-doubles" class="mode-btn active">Doubles</button>
                                <button id="mode-singles" class="mode-btn">Singles</button>
                            </div>
                        </div>
                        
                        <div class="player-list-header">
                            <h4>Players</h4>
                            <div class="player-list-sub-headers">
                                <span class="header-sex">SEX</span>
                                <span class="header-time">TIME</span>
                            </div>
                        </div>

                        <ul id="availablePlayersList">
                        </ul>
                    </div>
                </div>
            </section>

            <section id="courtsSection">
                <div id="court-grid" class="court-grid">
                </div>
            </section>
        </div>
    </main>

    <div id="checkout-thanks-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <img src="source/eldorainge-tennis-logo.png" alt="Eldoraigne Tennis Club" class="checkout-thanks-logo">
            <div class="checkout-thanks-content">
                <h3 id="checkout-thanks-title">Thanks for joining us!</h3>
                
                <div id="checkout-player-stats" class="checkout-stats-container hidden">
                    <h4>Here's how you did today:</h4>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Your Rank</span>
                            <strong id="stat-rank">#1</strong>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Win %</span>
                            <strong id="stat-win-percentage">100%</strong>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Time Today</span>
                            <strong id="stat-time-today">00h00m</strong>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Games Played</span>
                            <strong id="stat-games-played">0</strong>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Games Won</span>
                            <strong id="stat-games-won">0</strong>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Total Time</span>
                            <strong id="stat-total-time">00h00m</strong>
                        </div>
                    </div>
                    <div class="match-highlights">
                        <p id="best-match-highlight"><strong>Best Match:</strong> N/A</p>
                        <p id="worst-match-highlight"><strong>Toughest Match:</strong> N/A</p>
                    </div>
                </div>

                <p id="checkout-thanks-message">We hope you had a great day on the courts. Please join us for our next social day.</p>
                <p><strong>Just a friendly reminder to please settle your tuck shop account before you leave.</strong></p>
            </div>
            <div class="modal-actions">
                <button id="checkout-thanks-back-btn" class="action-btn neutral">Back</button>
                <button id="checkout-thanks-confirm-btn" class="action-btn confirm">Confirm</button>
            </div>
        </div>
    </div>

    <div id="checkout-thanks-no-stats-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <img src="source/eldorainge-tennis-logo.png" alt="Eldoraigne Tennis Club" class="checkout-thanks-logo">
            <div class="checkout-thanks-content">
                <h3 id="checkout-thanks-no-stats-title">Thanks for joining us!</h3>
                
                <p id="checkout-thanks-no-stats-message">We hope you had a great day on the courts. Please join us for our next social day.</p>
                <p><strong>Just a friendly reminder to please settle your tuck shop account before you leave.</strong></p>
            </div>
            <div class="modal-actions">
                <button id="checkout-thanks-no-stats-back-btn" class="action-btn neutral">Back</button>
                <button id="checkout-thanks-no-stats-confirm-btn" class="action-btn confirm">Confirm</button>
            </div>
        </div>
    </div>

    <div id="leaderboard-confirm-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Rules & Leaderboard</h3>
            </div>
            <div class="rules-container">
                <div class="rules-content-scrollable"> <h4>How The App Works:</h4>
                    <ul>
                        <li>The player at the top of the "Available Players" list selects a team from the 7 succeeding players and selects an available court to start a game.</li>
                        <li>After your match, you must end the game on the app to be placed back in the queue.</li>
                        <li>Court modes (Doubles, Singles, Rookie) are automatically assigned based on the number of checked-in players, with Doubles being the preferred format.</li>
                        <li>To ensure fair play, the app will allow for a mixed doubles match if there are not enough players of the same gender in the next 7 available players.</li>
                        <li>To ensure continuous play, if a player is called twice and does not respond, they will be moved outside the available players list and will be eligible for selection after the next match starts.</li>
                        <li>For a bit of fun, players are ranked based on their win percentage (games won vs. games played).</li>
                        <li>Lekker speel!!</li>
                    </ul>
                </div> <div class="leaderboard-prompt">
                    <p>Do you want your results to be included in the Player Statistics Leaderboard?</p>
                </div>
            </div>
            <div class="modal-actions" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.5rem;">
                <button id="leaderboard-back-btn" class="action-btn neutral">Back</button>
                <button id="leaderboard-btn-no" class="action-btn cancel" style="grid-column: 2 / 3;">No Thanks</button>
                <button id="leaderboard-btn-yes" class="action-btn confirm" style="grid-column: 3 / 4;">Yes Please</button>
            </div>
            <div class="modal-footer" style="text-align: center; margin-top: 1rem;">
                <button id="disclaimer-btn" class="link-button">View Disclaimer</button>
            </div>
        </div>
    </div>

    <div id="disclaimer-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Disclaimer</h3>
            </div>
            <p>Eldoraigne Tennis Club and the City of Tshwane Municipality cannot be held responsible for any injury, theft of personal items, or damage to or theft of motor vehicles.</p>
            <p><strong>Use at own risk:</strong> All City parks and facilities are used at your own risk.</p>
            <p><strong>Rules must be followed:</strong> All rules must be obeyed, and any reasonable request by an official on duty must be complied with.</p>
            <p><strong>Misbehavior consequences:</strong> Misbehavior can result in offenders being barred from facilities.</p>
            <div class="modal-actions">
                <button id="disclaimer-close-btn" class="action-btn">Close</button>
            </div>
        </div>
    </div>

    <div id="admin-settings-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Admin Settings</h3>
                <div class="modal-header-icons">
                    <button id="edit-styles-btn" class="admin-icon-btn" title="Edit Styles">
                        <i class="mdi mdi-format-font"></i>
                    </button>
                    <button id="ball-management-btn" class="admin-icon-btn" title="Ball Management">
                        ðŸ¥Ž
                    </button>
                    <button id="select-sound-btn" class="admin-icon-btn" title="Select Alert Sound">ðŸ””</button>
                    <button id="reset-app-btn" class="admin-icon-btn" title="Reset Application Data">
                        <i class="mdi mdi-refresh"></i>
                    </button>
                </div>
            </div>
            
            <div class="admin-settings-grid-2col">
                <div class="admin-settings-panel">
                    <h4>Select Member on Duty</h4>
                    <ul id="committee-member-list" class="modal-action-list scrollable">
                    </ul>
                </div>
                <div class="admin-settings-panel">
                    <h4>Court Settings</h4>
                    <ul id="court-availability-list" class="court-availability-list">
                    </ul>
                </div>
            </div>
            <div class="modal-actions" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1.5rem; padding-top: 0.5rem;">
                <button id="view-reorder-log-btn" class="action-btn" style="background-color: #6c757d;">View Reorder Log</button>
                <button id="reorder-players-btn" class="action-btn" style="background-color: var(--primary-blue);">Reorder Players</button>
            </div>
            <div class="modal-actions" style="display: flex; justify-content: center; margin-top: 1rem; padding-top: 0;">
                <button id="admin-close-btn" style="flex-grow: 0; min-width: 150px;">Close</button>
            </div>
        </div>
    </div>
    
    <div id="sound-selection-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Select Alert Sound</h3>
                <div class="modal-header-icons">
                    <button id="mute-btn" class="admin-icon-btn" title="Mute All Sounds">
                        <i class="mdi mdi-volume-high"></i>
                    </button>
                    <button id="minimize-notifications-btn" class="admin-icon-btn" title="Minimize Notifications">
                        <i class="mdi mdi-arrow-expand-vertical"></i>
                    </button>
                    <button id="no-speech-btn" class="admin-icon-btn" title="Turn Off Speech">
                        <i class="mdi mdi-microphone-message"></i>
                    </button>
                </div>
            </div>
            <p style="text-align: center; color: var(--neutral-color);">Choose the sound to play for notifications.</p>

            <ul class="modal-action-list" style="border-top: 1px solid var(--border-color); margin-top: 1rem; padding-top: 1rem;">
                <li class="court-availability-item">
                    <label for="auto-minimize-toggle">Auto-Minimize Alerts</label>
                    <label class="switch">
                        <input type="checkbox" id="auto-minimize-toggle">
                        <span class="slider"></span>
                    </label>
                </li>
            </ul>

            <div id="sound-selection-list" class="sound-selection-list scrollable">
            </div>

            <div class="modal-actions">
                <button id="sound-cancel-btn" class="action-btn">Cancel</button>
                <button id="sound-confirm-btn" class="action-btn" disabled>Confirm Selection</button>
            </div>
        </div>
    </div>

    <div id="reorder-log-modal" class="modal-overlay hidden">
        <div class="modal-content wide">
            <div class="modal-header-with-actions">
                <h3>Queue Reorder History</h3>
            </div>
            <p>Log of all administrative changes to the player queue.</p>
            <div id="reorder-history-list" class="history-list scrollable" style="max-height: 400px; padding: 0;">
            </div>
            <div class="modal-actions">
                <button id="reorder-log-back-btn" class="action-btn" style="background-color: #6c757d;">Back to Settings</button>
            </div>
        </div>
    </div>

    <div id="reorder-players-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Reorder Available Players</h3>
            </div>
            <p>Use the arrows to change the player queue order. The player at the top is first in line.</p>
            <ul id="reorder-players-list" class="modal-action-list scrollable">
            </ul>
            <div class="modal-actions">
                <button id="reorder-cancel-btn" class="action-btn" style="background-color: #6c757d;">Back to Settings</button>
                <button id="reorder-save-btn">Save Changes</button>
            </div>
        </div>
    </div>

    <div id="choose-teams-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Choose Teams</h3>
            </div>
            <p>Select 2 players for Team 1.<br>The rest will be Team 2.</p>
            <div id="modal-player-list" class="modal-player-list"></div>
            <div class="modal-actions">
                <button id="modal-cancel-btn">Cancel</button>
                <button id="modal-confirm-teams-btn">Confirm Teams</button>                
            </div>
        </div>
    </div>

    <div id="cancel-confirm-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Confirm Action</h3>
            </div>
            <p>Are you sure?</p>
            <div class="modal-actions">
                <button id="modal-btn-no" class="action-btn">Go Back</button>
                <button id="modal-btn-yes-confirm" class="action-btn">Yes</button>
            </div>
        </div>
    </div>

    <div id="guest-name-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Add New Player</h3>
            </div>
            <div class="score-input-area" style="flex-direction: column; align-items: stretch;">
                <label for="guest-name-input">First Name:</label>
                <input type="text" id="guest-name-input" readonly placeholder="Tap to enter name">
            </div>
            <div class="score-input-area" style="flex-direction: column; align-items: stretch; margin-top: 1rem;">
                <label for="guest-surname-input">Surname:</label>
                <input type="text" id="guest-surname-input" readonly placeholder="Tap to enter surname">
            </div>
            
            <div class="gender-selector">
                <label>Gender:</label>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="guest-gender" value="M"> M
                    </label>
                    <label>
                        <input type="radio" name="guest-gender" value="F"> F
                    </label>
                </div>
            </div>

            <div class="player-type-selector">
                <label>Player Type:</label>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="player-type" value="guest" checked> Guest
                    </label>
                    <label>
                        <input type="radio" name="player-type" value="member"> Member
                    </label>
                </div>
            </div>
            <div class="modal-actions">
                <button id="guest-cancel-btn">Cancel</button>
                <button id="guest-confirm-btn" disabled>Confirm Player</button>
            </div>
        </div>
    </div>

    <div id="check-in-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Check In Player</h3>
            </div>
            <p>Select a member, choose a returning or new guest,.</p>
            <div class="list-container">
                <div id="check-in-abc-index" class="abc-index"></div>
                <ul id="check-in-list" class="modal-action-list scrollable"></ul>
            </div>
            <div id="check-in-actions" class="modal-actions">
                <button id="check-in-cancel-btn">Close</button>
                <button id="returning-guest-btn" class="action-btn neutral">Guest</button>
                <button id="add-new-player-btn" class="action-btn">New Guest</button>
            </div>
        </div>
    </div>

    <div id="returning-guest-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Check In Returning Guest</h3>
            </div>
            <p>Select the '+' next to the guest to check them in.</p>
            <div class="list-container">
                <div id="returning-guest-abc-index" class="abc-index"></div>
                <ul id="returning-guest-list" class="modal-action-list scrollable"></ul>
            </div>
            <div class="modal-actions">
                <button id="returning-guest-cancel-btn">Back</button>
            </div>
        </div>
    </div>

    <div id="check-out-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Check Out Player</h3>
            </div>
            <p>Select the 'X' next to the player to check out.</p>
            <div class="list-container">
                <div id="check-out-abc-index" class="abc-index"></div>
                <ul id="check-out-list" class="modal-action-list scrollable"></ul>
            </div>
            <div class="modal-actions">
                <button id="check-out-cancel-btn">Close</button>
            </div>
        </div>
    </div>

    <div id="court-mode-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3 id="court-mode-title">Set Court Mode</h3>
            </div>
            <p style="color: var(--neutral-color); margin-bottom: 1rem;">Select the intended purpose for this court.</p>
            <ul id="court-mode-list" class="modal-action-list scrollable">
            </ul>
            <div class="modal-actions">
                <button id="court-mode-close-btn" class="action-btn cancel">Close</button>
            </div>
        </div>
    </div>

    <div id="end-game-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Enter Game Results</h3>
            </div>
            <p id="end-game-timestamp" style="font-size: 0.9rem; color: #6c757d; text-align: center; margin-top: -1rem; margin-bottom: 1.5rem;"></p>
            
            <div class="result-section">
                <h4>1. Select Winning Team</h4>
                <div id="end-game-teams">
                </div>
            </div>
    
            <div class="result-section hidden" id="score-section">
                <h4>2. Enter Final Score</h4>
                <div class="score-input-area">
                    <div class="score-input-wrapper winning">
                        <label for="winning-score">Winning Score</label>
                        <input type="number" id="winning-score" readonly>
                    </div>
                    <div class="score-input-wrapper losing">
                        <label for="losing-score">Losing Score</label>
                        <input type="number" id="losing-score" readonly>
                    </div>
                </div>
            </div>
            
            <div class="result-section hidden" id="tie-breaker-area">
                <h4>3. Enter Tie-Break Score</h4>
                   <div class="score-input-area">
                    <div class="score-input-wrapper winning">
                        <label for="winner-tiebreak">Winner's Points</label>
                        <input type="number" id="winner-tiebreak" readonly>
                    </div>
                    <div class="score-input-wrapper losing">
                        <label for="loser-tiebreak">Loser's Points</label>
                        <input type="number" id="loser-tiebreak" readonly>
                    </div>
                </div>
            </div>
    
            <div class="modal-actions">
                <button id="end-game-cancel-btn">Cancel</button>
                <button id="end-game-skip-btn" class="action-btn neutral">Skip Scores</button>
                <button id="end-game-confirm-btn" disabled>Confirm</button>
            </div>
        </div>
    </div>

    <div id="history-page" class="modal-overlay hidden">
        <div class="modal-content wide">
            <div class="modal-header-with-actions">
                <h3>Game History</h3>
            </div>
            <div id="history-list" class="history-list scrollable">
            </div>
            <div id="team-history-list" class="history-list scrollable" style="display: none;">
                </div>
            <div class="modal-actions">
                <button id="history-close-btn">Close</button>
                <button id="manual-entry-btn" class="action-btn neutral">Add Result</button>
                <button id="history-toggle-teams-btn" class="action-btn">Team Stats</button>
                <button id="history-toggle-view" class="action-btn">Player Stats</button>
            </div>
        </div>
    </div>

    <div id="custom-keypad-modal" class="modal-overlay hidden">
        <div class="keypad-content">
            <div id="keypad-display"></div>
            <div class="keypad-grid">
                <button class="keypad-btn" data-key="1">1</button>
                <button class="keypad-btn" data-key="2">2</button>
                <button class="keypad-btn" data-key="3">3</button>
                <button class="keypad-btn action" data-key="backspace">âŒ«</button>
                
                <button class="keypad-btn" data-key="4">4</button>
                <button class="keypad-btn" data-key="5">5</button>
                <button class="keypad-btn" data-key="6">6</button>
                <button class="keypad-btn action secondary" data-key="clear">C</button>
                
                <button class="keypad-btn" data-key="7">7</button>
                <button class="keypad-btn" data-key="8">8</button>
                <button class="keypad-btn" data-key="9">9</button>
                <button class="keypad-btn" data-key="0">0</button>

                <button class="keypad-btn wide-half cancel hidden" id="keypad-cancel-btn">Cancel</button>
                <button id="keypad-confirm-btn" class="keypad-btn wide-full confirm">Done</button>
            </div>
        </div>
    </div>

    <div id="court-mode-keypad-modal" class="modal-overlay hidden">
        <div class="keypad-content">
            <div id="court-mode-keypad-display"></div>
            <div class="keypad-grid">
                <button class="keypad-btn" data-key="1">1</button>
                <button class="keypad-btn" data-key="2">2</button>
                <button class="keypad-btn" data-key="3">3</button>
                <button class="keypad-btn action" data-key="backspace">âŒ«</button>
                
                <button class="keypad-btn" data-key="4">4</button>
                <button class="keypad-btn" data-key="5">5</button>
                <button class="keypad-btn" data-key="6">6</button>
                <button class="keypad-btn action secondary" data-key="clear">C</button>
                
                <button class="keypad-btn" data-key="7">7</button>
                <button class="keypad-btn" data-key="8">8</button>
                <button class="keypad-btn" data-key="9">9</button>
                <button class="keypad-btn" data-key="0">0</button>

                <button class="keypad-btn wide-half cancel" id="court-mode-keypad-cancel-btn">Cancel</button>
                <button id="court-mode-keypad-confirm-btn" class="keypad-btn wide-half confirm">Done</button>
            </div>
        </div>
    </div>

    <div id="custom-alpha-keypad-modal" class="modal-overlay hidden">
        <div class="keypad-content">
            <div id="alpha-keypad-display"></div>
            <div class="keypad-grid" id="alpha-keypad-grid">
            </div>
        </div>
    </div>
    
    <div id="manage-court-players-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Manage On-Court Players</h3>
            </div>
            <p id="manage-court-players-instructions">Select a court with an active game.</p>
            
            <ul id="court-list-for-management" class="modal-action-list scrollable">
            </ul>
            
            <ul id="remove-players-list" class="modal-action-list scrollable hidden">
            </ul>
            
            <ul id="add-players-list" class="modal-action-list scrollable hidden">
            </ul>
                
            <div class="modal-actions">
                <button id="manage-players-back-btn" class="action-btn hidden" style="background-color: #6c757d;">Back</button>
                <button id="manage-players-add-btn" class="action-btn hidden" style="background-color: var(--confirm-color);">Add Player</button>
                <button id="manage-players-confirm-btn" class="action-btn hidden">Confirm</button>
                <button id="manage-players-close-btn" class="action-btn" style="background-color: #dc3545;">Close</button>
            </div>
        </div>
    </div>

    <div id="current-weather-modal" class="modal-overlay hidden">
        <div class="modal-content weather-modal">
            <div class="modal-header-with-actions">
                <h3>Current Weather</h3>
                <span id="cw-time">8:00 AM</span>
            </div>
            <div class="weather-main">
                <div class="weather-temp-icon">
                    <span id="cw-icon" class="weather-icon-large"></span>
                    <span id="cw-temp" class="weather-temp-large">15Â°</span>
                </div>
                <div class="weather-feels-like">
                    <p>RealFeelÂ® <span id="cw-realfeel">13Â°</span></p>
                    <p>RealFeel Shadeâ„¢ <span id="cw-realfeel-shade">13Â°</span></p>
                </div>
            </div>
            <p id="cw-description" class="weather-description">Cloudy</p>
            <div class="weather-grid">
                <div class="weather-item">
                    <span>Wind</span>
                    <strong id="cw-wind">WSW 15 km/h</strong>
                </div>
                <div class="weather-item">
                    <span>Wind Gusts</span>
                    <strong id="cw-wind-gusts">39 km/h</strong>
                </div>
                <div class="weather-item">
                    <span>Air Quality</span>
                    <strong id="cw-air-quality" class="aqi-poor">Poor</strong>
                </div>
            </div>
            <div class="modal-actions">
                <button id="cw-close-btn">Close</button>
                <button id="cw-more-details-btn" class="action-btn">More Details</button>
            </div>
        </div>
    </div>

    <div id="detailed-weather-modal" class="modal-overlay hidden">
        <div class="modal-content weather-modal wide">
            <div class="modal-header-with-actions">
                <h3>Detailed Weather</h3>
            </div>
            <div id="detailed-weather-content">
                <div class="weather-section">
                    <h4>Detailed Current Weather</h4>
                    <div class="weather-grid">
                        <div class="weather-item"><span>Max UV Index</span><strong id="dw-uv">0.4 (Low)</strong></div>
                        <div class="weather-item"><span>Dew Point</span><strong id="dw-dewpoint">12Â°</strong></div>
                        <div class="weather-item"><span>Humidity</span><strong id="dw-humidity">81%</strong></div>
                        <div class="weather-item"><span>Pressure</span><strong id="dw-pressure">â†‘ 1015 mb</strong></div>
                        <div class="weather-item"><span>Cloud Cover</span><strong id="dw-cloud-cover">95%</strong></div>
                        <div class="weather-item"><span>Visibility</span><strong id="dw-visibility">16 km</strong></div>
                    </div>
                </div>
                <div class="weather-section">
                    <div class="weather-tabs">
                        <button class="tab active" data-view="day">Day</button>
                        <button class="tab" data-view="morning">Morning</button>
                        <button class="tab" data-view="afternoon">Afternoon</button>
                    </div>
                    <div class="weather-main-forecast">
                        <div class="weather-temp-icon">
                            <span id="forecast-icon" class="weather-icon-large"></span>
                            <span id="forecast-temp" class="weather-temp-large">25Â°</span>
                        </div>
                        <div class="weather-feels-like">
                            <p>RealFeelÂ® <span id="forecast-realfeel">27Â°</span></p>
                            <p>RealFeel Shadeâ„¢ <span id="forecast-realfeel-shade">23Â°</span></p>
                        </div>
                    </div>
                    <p id="forecast-description" class="weather-description">A thunderstorm this morning; otherwise, clouds and sun</p>
                    <div id="forecast-grid" class="weather-grid">
                        </div>
                </div>
            </div>
            <div class="modal-actions">
                <button id="dw-close-btn">Close</button>
            </div>
        </div>
    </div>

    <div id="sign-out-member-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Select Member Signing Out</h3>
            </div>
            <p id="sign-out-member-prompt" style="color: var(--neutral-color);">Please select the member responsible for this ball sign-out.</p>
            <div class="admin-settings-panel" style="max-height: 400px; margin-top: 1rem;">
                <ul id="sign-out-member-list" class="modal-action-list scrollable">
                    </ul>
            </div>
            <div class="modal-actions">
                <button id="sign-out-member-cancel-btn" class="action-btn" style="background-color: var(--cancel-color);">Cancel</button>
                <button id="sign-out-member-confirm-btn" class="action-btn" disabled>Confirm Member</button>
            </div>
        </div>
    </div>
    <div id="ball-management-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Ball Management</h3>
                <div class="modal-header-icons">
                    <button id="ball-history-btn" class="admin-icon-btn" title="Ball Transaction History">
                        <i class="mdi mdi-history"></i>
                    </button>
                </div>
            </div>
            <div class="ball-management-grid">
                
                <div class="admin-settings-panel">
                    <h4>Stock (Cans)</h4> 
                    <div class="stock-display-area">
                        <span id="ball-stock-count" class="stock-number">0</span>
                        <span class="stock-label">Cans in Stock</span>
                    </div>
                    <div class="stock-update-area">
                        <button id="add-stock-btn" class="action-btn" data-action="open-stock-keypad" style="background-color: var(--primary-blue);">Add Stock</button>
                        <button id="return-stock-btn" class="action-btn" data-action="open-return-keypad" style="background-color: var(--neutral-color);">Return Cans</button>
                    </div>
                </div>

                <div class="admin-settings-panel">
                    <h4>Sign Out (Cans)</h4> 
                    <p style="font-size: 0.9em; color: var(--neutral-color); margin-top: 0.5rem; margin-bottom: 1rem;">
                        Category for ball usage. 
                    </p>
                    <div id="sign-out-options" class="sign-out-options scrollable">
                        <button class="action-btn sign-out-btn" data-category="ClubChamps">Club Champs</button>
                        <button class="action-btn sign-out-btn" data-category="League">League</button>
                        <button class="action-btn sign-out-btn" data-category="Social">Social</button>
                        <button class="action-btn sign-out-btn" data-category="Sale" style="background-color: var(--cancel-color);">Sales</button>
                    </div>
                </div>

                <div class="admin-settings-panel">
                    <h4>Used Balls (Singles)</h4> 
                    <div class="stock-display-area">
                        <span id="used-ball-stock-count" class="stock-number used">0</span>
                        <span class="stock-label">Used Balls in Stock</span>
                    </div>
                    <div class="stock-update-area">
                        <button id="return-used-balls-btn" class="action-btn" style="background-color: var(--inactive-color); border-color: var(--inactive-color);">Return Used Balls</button>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button id="ball-management-close-btn" class="action-btn">Done</button>
            </div>
        </div>
    </div>

    <div id="ball-history-modal" class="modal-overlay hidden">
        <div class="modal-content wide">
            <div class="modal-header-with-actions">
                <h3>Ball Transaction History</h3>
            </div>
            <p>A log of all ball stock additions, returns, and sign-outs.</p>
            <div id="ball-history-list" class="history-list scrollable">
                </div>
            <div class="modal-actions">
                <button id="ball-history-close-btn" class="action-btn">Close</button>
            </div>
        </div>
    </div>

    <div id="edit-styles-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Edit Display Styles</h3>
            </div>
            <div class="style-settings-panel">
                <h4>Font Size</h4>
                <div class="font-size-selector" id="font-size-selector">
                    <button data-size="0.8">-20%</button>
                    <button data-size="0.9">-10%</button>
                    <button data-size="1.0" class="active">Default</button>
                    <button data-size="1.1">+10%</button>
                    <button data-size="1.2">+20%</button>
                </div>
            </div>
            <div class="style-settings-panel">
                <h4>Display Size</h4>
                <div class="display-size-selector" id="display-size-selector">
                    <button data-size="0.9">Small</button>
                    <button data-size="1.0" class="active">Default</button>
                    <button data-size="1.1">Large</button>
                </div>
            </div>
            <div class="modal-actions">
                <button id="edit-styles-close-btn" class="action-btn">Done</button>
            </div>
        </div>
    </div>

    <div id="junior-club-modal" class="modal-overlay hidden">
        <div class="modal-content full-height">
            <div class="modal-header-with-actions">
                <h3>Junior Club Check In</h3>
                <div class="modal-header-icons">
                    <button id="junior-club-roster-btn" class="admin-icon-btn" title="View Full Roster">
                        <i class="mdi mdi-format-list-bulleted"></i>
                    </button>
                    <button id="junior-club-history-btn" class="admin-icon-btn" title="View History & Payment">
                        $
                    </button>
                </div>
            </div>
            <div class="list-container">
                <div id="junior-club-abc-index" class="abc-index"></div>
                <ul id="junior-club-list" class="modal-action-list scrollable"></ul>
            </div>
            <div class="modal-actions modal-grid-2x2">
                <button id="junior-club-close-btn" class="action-btn cancel">Close</button>
                <button id="new-parent-btn" class="action-btn confirm">New Parent</button>
            </div>
        </div>
    </div>

    <div id="new-parent-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>New Parent Registration</h3>
            </div>
            
            <div id="parent-collapsed-display" class="collapsed-area hidden"></div>
            
            <div id="parent-fields">
                <div class="score-input-area" style="flex-direction: column; align-items: stretch;">
                    <label for="parent-name-input">Parent First Name:</label>
                    <input type="text" id="parent-name-input" readonly placeholder="Tap to enter name" style="width: 100%;">
                </div>
                <div class="score-input-area" style="flex-direction: column; align-items: stretch; margin-top: 1rem;">
                    <label for="parent-surname-input">Parent Surname:</label>
                    <input type="text" id="parent-surname-input" readonly placeholder="Tap to enter surname" style="width: 100%;">
                </div>
                <div class="score-input-area" style="flex-direction: column; align-items: stretch; margin-top: 1rem;">
                    <label for="parent-phone-input">Parent Phone (Mandatory):</label>
                    <input type="tel" id="parent-phone-input" readonly placeholder="Tap to enter number" style="width: 100%;">
                </div>
            </div>

            <div id="children-container-wrapper">
                <h4 style="margin-top: 1.5rem; border-top: 1px solid var(--border-color); padding-top: 1rem;">Children Details</h4>
                <div id="children-container" style="max-height: 40vh; overflow-y: auto;">
                    </div>
            </div>

            <div class="modal-actions modal-grid-2x2">
                <button id="add-child-btn" class="action-btn confirm">
                    Add Child
                </button>
                <button id="remove-child-btn-main" class="action-btn remove-child-bordered-btn">
                    Remove Child
                </button>
                <button id="new-parent-cancel-btn" class="action-btn cancel">Close</button>
                <button id="new-parent-confirm-btn" class="action-btn confirm" disabled>Confirm</button>
            </div>
            </div>
    </div>

    <div id="child-selection-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Select Attending Children</h3>
            </div>
            <p id="child-selection-prompt">Please select the children who are present today.</p>
            <ul id="attending-children-list" class="modal-action-list scrollable">
                </ul>
            <div class="modal-actions">
                <button id="child-selection-back-btn" class="action-btn neutral">Back</button>
                <button id="child-selection-confirm-btn" class="action-btn" disabled>Check In (0 Children)</button>
            </div>
        </div>
    </div>
    
    <div id="remove-child-selection-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3 id="remove-child-selection-title">Remove Registered Children</h3>
            </div>
            <p id="remove-child-selection-prompt">Please select the children you wish to remove from this parent's profile.</p>
            <ul id="children-for-removal-list" class="modal-action-list scrollable">
                </ul>
            <div class="modal-actions">
                <button id="remove-child-selection-back-btn" class="action-btn neutral">Back</button>
                <button id="remove-child-selection-confirm-btn" class="action-btn cancel" disabled>Remove Selected (0 Children)</button>
            </div>
        </div>
    </div>

    <div id="junior-club-stats-modal" class="modal-overlay hidden">
        <div class="modal-content wide full-height">
            <div class="modal-header-with-actions">
                <h3>Junior Club Payment History</h3>
            </div>
            <div class="list-container">
                <div id="junior-club-history-abc-index" class="abc-index"></div>
                <ul id="junior-club-history-list" class="history-list scrollable" style="padding: 0;">
                    </ul>
            </div>
            <div class="modal-actions">
                <button id="junior-club-stats-back-btn" class="action-btn neutral">Back to Check In</button>
                <button id="junior-club-stats-details-btn" class="action-btn" disabled>View Details</button>
            </div>
        </div>
    </div>

    <div id="junior-club-detail-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3 id="detail-parent-name">Parent Name</h3>
            </div>
            <p id="detail-date" style="font-size: 0.9em; color: var(--neutral-color); margin-bottom: 1rem;"></p>
            
            <h4 style="margin-bottom: 0.5rem;">Attended Children:</h4>
            <ul id="detail-children-list" class="modal-action-list">
                </ul>
            
            <div class="modal-actions" style="margin-top: 1.5rem;">
                <button id="detail-close-btn" class="action-btn cancel">Close</button>
                <button id="detail-toggle-paid-btn" class="action-btn">Mark as Paid</button>
            </div>
        </div>
    </div>

    <div id="junior-club-roster-modal" class="modal-overlay hidden">
        <div class="modal-content wide full-height">
            
            <div class="modal-header-with-actions">
                <h3>Junior Club Roster</h3>
            </div>
            <div class="list-container">
                <div id="junior-club-roster-abc-index" class="abc-index"></div>
                <ul id="junior-club-roster-list" class="modal-action-list scrollable"></ul>
            </div>
            
            <div class="modal-actions">
                <button id="roster-close-btn" class="action-btn cancel">Close</button>
            </div>
        </div>
    </div>

    <div id="roster-detail-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3 id="roster-detail-title"></h3>
            </div>
            <div id="roster-detail-content" style="max-height: 40vh; overflow-y: auto;">
                </div>
            <div class="modal-actions">
                <button 
                    id="roster-detail-close-btn" 
                    class="action-btn cancel" 
                >Close</button>
            </div>
        </div>
    </div>
    
<div id="manual-entry-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Select Checked In Players</h3>
            </div>
            <p>Select 2 (Singles) or 4 (Doubles) players who participated in the match.</p>
            <div id="manual-selected-players" class="manual-selected-container"></div>
            <div class="list-container">
                <div id="manual-player-abc-index" class="abc-index"></div>
                <ul id="manual-player-list" class="modal-action-list scrollable"></ul>
            </div>
            <div class="modal-actions">
                <button id="manual-entry-cancel-btn" class="action-btn cancel">Close</button>
                <button id="add-outside-player-btn" class="action-btn">Checked Out</button>
                <button id="manual-entry-confirm-btn" class="action-btn" disabled>Confirm</button>
            </div>
        </div>
    </div>

    <div id="outside-player-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <div class="modal-header-with-actions">
                    <h3>Select Checked Out Players</h3>
                </div>
                <p>Select a player who has already checked out or is a returning guest.</p>
                <div id="outside-selected-players" class="manual-selected-container"></div>
                <div class="list-container">
                    <div id="outside-player-abc-index" class="abc-index"></div>
                    <ul id="outside-player-list" class="modal-action-list scrollable"></ul>
                </div>
                <div class="modal-actions">
                    <button id="outside-player-back-btn" class="action-btn cancel">Back</button>
                    <button id="outside-player-confirm-btn" class="action-btn" disabled>Confirm</button>
                </div>
            </div>
        </div>
<div id="temp-duty-handover-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <div class="modal-header-with-actions">
            <h3>Temporary Duty Handover</h3>
        </div>
        <p id="temp-duty-handover-prompt" style="text-align: center; color: var(--neutral-color); margin-bottom: 1.5rem;">
            Who is going to take over from <strong><span id="temp-duty-current-member">Member Name</span></strong>?<br>
            Please inform them before heading to court.
        </p>
        <div class="admin-settings-panel" style="max-height: 400px;">
            <ul id="temp-duty-handover-list" class="modal-action-list scrollable">
            </ul>
        </div>
        <div class="modal-actions">
            <button id="temp-duty-cancel-btn" class="action-btn cancel">Cancel</button>
            <button id="temp-duty-confirm-btn" class="action-btn confirm" disabled>Confirm Handover</button>
        </div>
    </div>
</div>


    <script src="script.js"></script>
</body>
</html>