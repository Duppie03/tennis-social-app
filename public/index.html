<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eldoraigne Tennis Club - Social Day</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1 id="header-clock">Social Day Manager</h1>
        <div class="header-buttons">
            <button id="historyBtn" class="header-btn secondary">History</button>
        </div>
    </header>

    <main class="container">
        <div id="info-bar" class="info-bar hidden">
            <p id="info-bar-text">Dynamic message goes here.</p>
            </div>
        
        <div class="content-columns">
            <section class="player-column">
                <div id="availablePlayersSection">
                    <div class="card-header">
                        <h3>Available Players</h3>
                    </div>
                    <div class="card-body">
                        <div class="player-list-controls">
                            <button id="checkInBtn" class="action-btn">Check In</button>
                            <button id="checkOutBtn" class="action-btn">Check Out</button>
                        </div>
                        <h4>Mode</h4>
                        <div class="mode-selector">
                            <button id="mode-doubles" class="mode-btn active">Doubles</button>
                            <button id="mode-singles" class="mode-btn">Singles</button>
                        </div>
                        <h4>Players</h4>
                        <ul id="availablePlayersList">
                            </ul>
                    </div>
                </div>
            </section>

            <section id="courtsSection">
                <div id="court-grid" class="court-grid">
                </div>
            </section>
        </div>
    </main>

    <div id="admin-settings-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Admin Settings</h3>
                <button id="select-sound-btn" class="admin-icon-btn" title="Select Alert Sound">ðŸ””</button>
            </div>
            
            <div class="admin-settings-grid-2col">
                <div class="admin-settings-panel">
                    <h4>Select Member on Duty</h4>
                    <ul id="committee-member-list" class="modal-action-list scrollable">
                    </ul>
                </div>
                <div class="admin-settings-panel">
                    <h4>Court Availability</h4>
                    <ul id="court-availability-list" class="court-availability-list">
                    </ul>
                </div>
            </div>
            <div class="modal-actions" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-top: 1.5rem; padding-top: 0.5rem;">
                <button id="view-reorder-log-btn" class="action-btn" style="background-color: #6c757d;">View Reorder Log</button>
                <button id="reorder-players-btn" class="action-btn" style="background-color: var(--primary-blue);">Reorder Players</button>
                <button id="manage-court-players-btn" class="action-btn" style="background-color: #007bff; border-color: #007bff;">Manage On-Court Players</button>
            </div>
            <div class="modal-actions" style="display: flex; justify-content: center; margin-top: 1rem; padding-top: 0;">
                <button id="admin-close-btn" style="flex-grow: 0; min-width: 150px;">Close</button>
            </div>
        </div>
    </div>
    
    <div id="sound-selection-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header-with-actions">
                <h3>Select Alert Sound</h3>
                <div>
                    <button id="mute-btn" class="admin-icon-btn" title="Mute All Sounds">
                        <i class="mdi mdi-volume-high"></i>
                    </button>
                    <button id="minimize-notifications-btn" class="admin-icon-btn" title="Minimize Notifications">
                        <i class="mdi mdi-arrow-expand-vertical"></i>
                    </button>
                    <button id="no-speech-btn" class="admin-icon-btn" title="Turn Off Speech">
                        <i class="mdi mdi-microphone-message"></i>
                    </button>
                </div>
            </div>
            <p style="text-align: center; color: var(--neutral-color);">Choose the sound to play for notifications.</p>

            <div id="sound-selection-list" class="sound-selection-list scrollable">
                </div>

            <div class="modal-actions">
                <button id="sound-cancel-btn" class="action-btn">Cancel</button>
                <button id="sound-confirm-btn" class="action-btn" disabled>Confirm Selection</button>
            </div>
        </div>
    </div>

    <div id="reorder-log-modal" class="modal-overlay hidden">
        <div class="modal-content wide">
            <h3>Queue Reorder History</h3>
            <p>Log of all administrative changes to the player queue.</p>
            <div id="reorder-history-list" class="history-list scrollable" style="max-height: 400px; padding: 0;">
                </div>
            <div class="modal-actions">
                <button id="reorder-log-back-btn" class="action-btn" style="background-color: #6c757d;">Back to Settings</button>
            </div>
        </div>
    </div>

    <div id="reorder-players-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Reorder Available Players</h3>
            <p>Use the arrows to change the player queue order. The player at the top is first in line.</p>
            <ul id="reorder-players-list" class="modal-action-list scrollable">
                </ul>
            <div class="modal-actions">
                <button id="reorder-cancel-btn" class="action-btn" style="background-color: #6c757d;">Back to Settings</button>
                <button id="reorder-save-btn">Save Changes</button>
            </div>
        </div>
    </div>

    <div id="choose-teams-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Choose Teams</h3>
            <p>Select 2 players for Team 1. The rest will be Team 2.</p>
            <div id="modal-player-list" class="modal-player-list"></div>
            <div class="modal-actions">
                <button id="modal-confirm-teams-btn">Confirm Teams</button>
                <button id="modal-cancel-btn">Cancel</button>
            </div>
        </div>
    </div>

    <div id="cancel-confirm-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Confirm Action</h3>
            <p>Are you sure?</p>
            <div class="modal-actions">
                <button id="modal-btn-no" class="action-btn">Go Back</button>
                <button id="modal-btn-yes-confirm" class="action-btn">Yes</button>
            </div>
        </div>
    </div>

    <div id="guest-name-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Add New Guest</h3>
            <div class="score-input-area" style="flex-direction: column; align-items: stretch;">
                <label for="guest-name-input">First Name:</label>
                <input type="text" id="guest-name-input" readonly placeholder="Tap to enter name">
            </div>
            <div class="score-input-area" style="flex-direction: column; align-items: stretch; margin-top: 1rem;">
                <label for="guest-surname-input">Surname:</label>
                <input type="text" id="guest-surname-input" readonly placeholder="Tap to enter surname">
            </div>
            
            <div class="gender-selector">
                <label>Gender:</label>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="guest-gender" value="M" checked> Male
                    </label>
                    <label>
                        <input type="radio" name="guest-gender" value="F"> Female
                    </label>
                </div>
            </div>

            <div class="modal-actions">
                <button id="guest-cancel-btn">Cancel</button>
                <button id="guest-confirm-btn" disabled>Confirm Guest</button>
            </div>
        </div>
    </div>

    <div id="check-in-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Check In</h3>
            <p>Select the '+' next to the player to check in.</p>
            <ul id="check-in-list" class="modal-action-list scrollable"></ul>
            <div class="modal-actions">
                <button id="add-guest-btn" class="action-btn" style="background-color: #007bff; border-color: #007bff;">Add Guest</button>
                <button id="check-in-cancel-btn">Close</button>
            </div>
        </div>
    </div>

    <div id="check-out-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Check Out Player</h3>
            <p>Select the 'X' next to the player to check out.</p>
            <ul id="check-out-list" class="modal-action-list scrollable"></ul>
            <div class="modal-actions">
                <button id="check-out-cancel-btn">Close</button>
            </div>
        </div>
    </div>

    <div id="end-game-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Enter Game Results</h3>
            <p id="end-game-timestamp" style="font-size: 0.9rem; color: #6c757d; text-align: center; margin-top: -1rem; margin-bottom: 1.5rem;"></p>
            
            <div class="result-section">
                <h4>1. Select Winning Team</h4>
                <div id="end-game-teams">
                    </div>
            </div>
    
            <div class="result-section hidden" id="score-section">
                <h4>2. Enter Final Score</h4>
                <div class="score-input-area">
                    <div class="score-input-wrapper winning">
                        <label for="winning-score">Winning Score</label>
                        <input type="number" id="winning-score" readonly>
                    </div>
                    <div class="score-input-wrapper losing">
                        <label for="losing-score">Losing Score</label>
                        <input type="number" id="losing-score" readonly>
                    </div>
                </div>
            </div>
            
            <div class="result-section hidden" id="tie-breaker-area">
                <h4>3. Enter Tie-Break Score</h4>
                   <div class="score-input-area">
                    <div class="score-input-wrapper winning">
                        <label for="winner-tiebreak">Winner's Points</label>
                        <input type="number" id="winner-tiebreak" readonly>
                    </div>
                    <div class="score-input-wrapper losing">
                        <label for="loser-tiebreak">Loser's Points</label>
                        <input type="number" id="loser-tiebreak" readonly>
                    </div>
                </div>
            </div>
    
            <div class="modal-actions">
                <button id="end-game-cancel-btn">Cancel</button>
                <button id="end-game-confirm-btn" disabled>Confirm</button>
            </div>
        </div>
    </div>

    <div id="history-page" class="modal-overlay hidden">
        <div class="modal-content wide">
            <h3>Game History</h3>
            <div id="history-list" class="history-list scrollable">
            </div>
            <div class="modal-actions">
                <button id="history-toggle-view" class="action-btn">Show Player Stats</button>
                <button id="history-close-btn">Close</button>
            </div>
        </div>
    </div>

    <div id="custom-keypad-modal" class="modal-overlay hidden">
        <div class="keypad-content">
            <div id="keypad-display"></div>
            <div class="keypad-grid">
                <button class="keypad-btn" data-key="1">1</button>
                <button class="keypad-btn" data-key="2">2</button>
                <button class="keypad-btn" data-key="3">3</button>
                <button class="keypad-btn action" data-key="backspace">âŒ«</button>
                
                <button class="keypad-btn" data-key="4">4</button>
                <button class="keypad-btn" data-key="5">5</button>
                <button class="keypad-btn" data-key="6">6</button>
                <button class="keypad-btn action secondary" data-key="clear">C</button>
                
                <button class="keypad-btn" data-key="7">7</button>
                <button class="keypad-btn" data-key="8">8</button>
                <button class="keypad-btn" data-key="9">9</button>
                <button class="keypad-btn" data-key="0">0</button>

                <button class="keypad-btn wide-half cancel hidden" id="keypad-cancel-btn">Cancel</button>
                <button class="keypad-btn wide-full confirm" id="keypad-confirm-btn">Done</button>
            </div>
        </div>
    </div>

    <div id="custom-alpha-keypad-modal" class="modal-overlay hidden">
        <div class="keypad-content">
            <div id="alpha-keypad-display"></div>
            <div class="keypad-grid" id="alpha-keypad-grid">
            </div>
        </div>
    </div>
    
    <div id="manage-court-players-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Manage On-Court Players</h3>
            <p id="manage-court-players-instructions">Select a court with an active game.</p>
            
            <ul id="court-list-for-management" class="modal-action-list scrollable">
                </ul>
            
            <ul id="remove-players-list" class="modal-action-list scrollable hidden">
                </ul>
            
            <ul id="add-players-list" class="modal-action-list scrollable hidden">
                </ul>
                
            <div class="modal-actions">
                <button id="manage-players-back-btn" class="action-btn hidden" style="background-color: #6c757d;">Back</button>
                <button id="manage-players-add-btn" class="action-btn hidden" style="background-color: var(--confirm-color);">Add Player</button>
                <button id="manage-players-confirm-btn" class="action-btn hidden">Confirm</button>
                <button id="manage-players-close-btn" class="action-btn" style="background-color: #dc3545;">Close</button>
            </div>
        </div>
    </div>
    
        <script src="script.js"></script>
</body>
</html>